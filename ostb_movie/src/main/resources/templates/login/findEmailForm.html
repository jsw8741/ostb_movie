<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">

<head>
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />
</head>	

<th:block layout:fragment="css">
	<link rel="stylesheet" type="text/css" th:href="@{/css/loginForm.css}"/>
</th:block>	

<div layout:fragment="content">
	<div class="Login">
		<div class="Login__wrap">
			<div class="Login__content">
				<h3>이메일 찾기</h3>
			<form role="form" action="/login/find/email" method="post">
				<div class="Login__content-input">
					<input type="text" class="form-control" id="name" name="name" placeholder="이름을 입력해주세요">
					<input type="tel" class="form-control" name="phone" placeholder="'-'를 제외한 전화번호를 입력하세요." oninput="formatPhoneNumber(this)" maxlength="13">
				</div>
				
				<div class="Login__content-btn">
					<button type="submit" class="Login__content-btn-login">찾기</button>
				</div>
				
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			</form>
			</div>
			
		</div>
	</div>
</div>

<th:block layout:fragment="script">
	<script th:inline="javascript">
	// 회원 정보 없을 때
	var errorMessage = [[${errorMessage}]];
	if(errorMessage != null){
		alert(errorMessage);
	} 
	
	// 전화번호 자동 정규식 처리
	function formatPhoneNumber(obj) {
	      obj.value = obj.value.replace(/[^0-9]/g, '').replace(/^(\d{2,3})(\d{3,4})(\d{4})$/, `$1-$2-$3`)
	  }	
	</script>
</th:block>
</html>