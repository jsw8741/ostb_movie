
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>ostb movie</title>
<link rel="stylesheet" th:href="@{/css/classy-nav.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css}">
<!-- CSS only -->


<!-- 각 페이지의 CSS가 작성될 위치 -->
<th:block layout:fragment="css">
</th:block>
</head>

<body>
<div class="site-wrap">
	<div th:replace="~{fragments/header::header}"></div>
	<div layout:fragment="content" class="content"></div>
	<div th:replace="~{fragments/footer::footer}"></div>
</div>

<!-- 공통으로 쓰이는 js -->

<script th:src="@{'/js/jquery/jquery-2.2.4.min.js'}"></script>
<script th:src="@{'/js/bootstrap/popper.min.js'}"></script>
<script th:src="@{'/js/bootstrap/bootstrap.min.js'}"></script>
<script th:src="@{'/js/plugins/plugins.js'}"></script>
<script th:src="@{'/js/active.js'}"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/popupjs/dist/popup.min.js}"></script>
<script type="text/javascript" th:src="@{https://code.jquery.com/jquery-1.12.4.min.js}"></script>
<script type="text/javascript" th:src="@{https://service.iamport.kr/js/iamport.payment-1.1.5.js}"></script>

<!-- JavaScript Bundle with Popper -->
    <script th:src="@{https://code.jquery.com/jquery-3.4.1.min.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js}"></script>
    
    <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js}"></script>
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js}"></script>
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.js}"></script>
    
    
    <script th:src="@{/lib/wow/wow.min.js}"></script>
    <script th:src="@{/lib/easing/easing.min.js}"></script>
    <script th:src="@{/lib/waypoints/waypoints.min.js}"></script>
    <script th:src="@{/lib/owlcarousel/owl.carousel.min.js}"></script>

    <!-- Template Javascript -->
    <script th:src="@{/js/main.js}"></script>

<!-- 각 페이지의 스크립트가 작성될 위치 -->
<th:block layout:fragment="script">
<script th:inline="javascript">
	    async function checkLogin() {
		    try {
		        const response = await fetch("/check-login", {
		            method: "GET",
		            credentials: "include" // 쿠키를 전송하기 위해 필요한 옵션
		        });

		        const data = await response.json();
		        if (data.isAuthenticated) {
		            // 로그인된 상태라면 링크를 클릭한 후 이동
		            return true;
		        } else {
		            alert("로그인이 필요합니다."); // 또는 원하는 메시지 출력
		            window.location.href = "/login/loginForm"; // 로그인 페이지로 리다이렉트
		            return false; // 링크를 클릭해도 이동하지 않음
		        }
		    } catch (error) {
		        console.error("로그인 여부 확인 중 오류:", error);
		        // 에러 발생 시 어떻게 처리할지 정의
		    }
		}
</script>	    
</th:block>
</body>
</html>